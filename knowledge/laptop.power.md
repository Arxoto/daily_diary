# win本合盖发热问题分析和解决方法

see https://www.bilibili.com/video/BV1k46GY5Eg1/

## 零、原理分析

### 睡眠与休眠的差异

> - 睡眠：待机模式下，数据保存在内存中，待机时持续给内存供电
> - 休眠：待机模式下，数据保存在磁盘中，理想状态下不耗电；少部分外设可唤醒

### 系统待机时断开电源

> 在 WIN10 中，充电状态下合上笔记本，系统会以网络连接模式进入待机。此时再拔电源，设备无法知道脱离充电状态，仍然保持网络连接。此时若遇到系统更新，就会被唤醒。

LTT(LinusTechTips) 有过如上解释。在 WIN11 中实测不存在因系统更新导致的该问题，但有其他相同原理的类似情况。

### 设备唤醒

> WINDOWS ACPI BIOS 文档中有写，某些设备可以在睡眠状态中响应外部信号。软件唤醒机制允许系统和从除 S5(PowerSystemShutdown) 以外的任何状态唤醒，具体取决于系统和设备硬件以及 BIOS 中的支持。

有 统一可扩展接口论坛 (UEFI Forum) 对此作了一系列规范，但其非强制性规范，因此不同的笔记本厂商生产的笔记本行为也有所差异。

一般认为睡眠下，各种外设和误触都很容易唤醒电脑，而在休眠下，只有少数特定的唤醒功能，如 Wake-on-LAN 和 USB 唤醒 等等（也有部分鼠标唤醒的情况），系统允许自行调整这些设置。

### 软件的待机时触发行为

部分应用通过系统API注册订阅了睡眠/休眠/恢复的通知，部分应用由于使用开源代码版本老旧、逻辑存在缺陷等问题，在待机时触发了不正确的逻辑。

### 总结

因此该问题较为复杂，电脑厂商、微软WINDOWS、软件应用，任意一方均可能导致该问题。

## 一、先拔掉充电器，再合盖

**先拔充电器，再合盖！！**

这一步是最简单最方便的，而且可以解决大多数问题。

## 二、将电脑调整为休眠模式

> **注意！！**
>
> 在某些电脑当中，休眠模式是禁用的，虽然可以通过命令提示符强行打开休眠模式，但是不建议这样做。因为强行打开休眠模式会占用非常多的硬盘空间，同时也可能会带来一些兼容性的问题。

按“win+R”键，输入 `cmd` ，然后按回车，打开命令提示符。

通过 `powercfg /a` 命令可以查询你的电脑支持的睡眠状态

假如你的电脑是允许休眠模式的，那就这样做：

1. 打开电源选项

    在Windows任务栏的搜索框中输入“电源选项”，然后点击 **选择电源按钮的功能** 。

1. 修改电源按钮设置

    在 **定义电源按钮和开启密码保护** 页面，点击 **更改当前不可用的设置** 。
    
    滚动到下方的 **关闭电源按钮的设置** ，然后勾选 **休眠** 选项（如果休眠模式已经启用）。

1. 保存更改

    确认更改后，点击保存更改。

如果休眠模式没有显示，则可以通过以下步骤启用：

1. 按“win+x”或右键单击“开始”按钮，选择“终端 (管理员)”或“命令提示符 (管理员)”——注意，一定得是管理员模式，常规用“win+R”然后输入 `cmd` 的方法不行。

1. 输入以下命令并按回车： `powercfg /hibernate on`

1. 重新启动计算机，确保休眠模式被启用。

## 三、手动关闭某些外设的唤醒功能

禁用设备的唤醒功能

> **注意！！**
>
> 在关闭了以下唤醒功能后，你的电脑就无法通过按鼠标或者按键盘直接唤醒了，必须点击电源键，这可能会带来一些使用上的繁琐。此外，并不是所有的设备都需要关闭，大家可以酌情选择，比如只关闭鼠标或者键盘的。

总之方法都在下面。

另：在我们的实际测试当中，USB设备的唤醒功能并不影响电脑发热问题，所以这里就没有提。

1. 打开设备管理器

    在任务栏搜索框中输入“设备管理器”，点击 **设备管理器** 。

1. 查找相关外设

    在设备管理器中，找到你怀疑会唤醒电源的外设。常见的外设包括：
    - 鼠标和键盘：展开 **“鼠标和其他指针设备”** ，找到你使用的鼠标设备。
    - 网络适配器：展开 **“网络适配器”** ，找到你使用的网络适配器（尤其是Wi-Fi适配器）。

1. 禁用唤醒功能

    右键点击目标设备，选择 **属性** 。
    切换到 **电源管理** 标签。
    在电源管理选项卡下，找到 **允许此设备唤醒计算机** ，并取消勾选该选项。

1. 保存更改

    点击确定保存更改。

1. 重复此步骤对所有可能唤醒计算机的设备（如鼠标、键盘、网络适配器等）进行设置。

此外，有时候电源选项中的一些设置也可能导致外设唤醒计算机。你可以调整这些设置以确保外设不会影响休眠状态。

调整电源选项设置：

1. 打开电源选项

    在任务栏搜索框中输入“电源选项”，并点击 **电源和睡眠设置** 。

1. 更改计划设置

    点击 **更改计划设置** ，然后点击 **更改高级电源设置** 。

1. 禁用唤醒设置

    在弹出的窗口中，展开 **睡眠** ，然后找到 **允许唤醒计时器** ，将其设置为 **禁用** 。

1. 保存更改

    点击应用，然后点击确定。
